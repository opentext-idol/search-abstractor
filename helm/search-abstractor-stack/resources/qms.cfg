// patching config file
// idol_ssl.cfg is written by run_idol.sh with SSL settings if required by IDOL_SSL env variable
// original.content.cfg is the config file as contained in the standard component zip

// modified config sections

< "/qms/cfg/idol_ssl.cfg" [SSLSettings]

[Service] < "/qms/cfg/original.qms.cfg" [Service]
Access-Control-Allow-Origin=*

[Server] < "/qms/cfg/original.qms.cfg" [Server]
< "idol_ssl.cfg" [EnableSSL] SSLConfig
Threads=32

[AuthorizationRoles] < "/qms/cfg/original.qms.cfg" [AuthorizationRoles]

[AdminRole] < "/qms/cfg/original.qms.cfg" [AdminRole]
Clients=*

[QueryRole] < "/qms/cfg/original.qms.cfg" [QueryRole]
Clients=*

[IDOL]
Host=idol-content
Port=9100

[PromotionAgentStore]
Host=idol-content
Port=9100

[Logging] < "/qms/cfg/original.qms.cfg" [Logging]
LogDirectory=/idol-logs
LogArchiveDirectory=/idol-logs/archive
LogEcho=TRUE

[Embeddings]
0=T5
1=Model_minilm_256
2=Model_clip_ViT-B-32

[T5]
Type=Transformer
ModelName=sentence-transformers/sentence-t5-large
ModelMaxSequenceLength=128
ModelSequenceOverlap=16
ModelMinimumFinalSequenceLength=64

[Model_minilm_256]
Type=Transformer
ModelName=sentence-transformers/multi-qa-MiniLM-L6-cos-v1
ModelMaxSequenceLength=256
ModelSequenceOverlap=16
ModelMinimumFinalSequenceLength=64

[Model_clip_ViT-B-32]
Type=Transformer
ModelName=sentence-transformers/clip-ViT-B-32-multilingual-v1
ModelMaxSequenceLength=128
ModelSequenceOverlap=16
ModelMinimumFinalSequenceLength=64

[Generative]
0=GenT5

[GenT5]
Type=GenerativeLLM
ModelName=google/flan-t5-small

[VectorFields]
0=T5Vector
1=VModel_minilm_256
2=VModel_clip

[T5Vector]
Model=T5
FieldName=VECTOR

[VModel_minilm_256]
FieldName=VECTOR_MINILM_256
MaxNeighbors=100
Model=Model_minilm_256

[VModel_clip]
FieldName=VECTOR_CLIP-VIT-B-32
Model=Model_clip_ViT-B-32
MaxNeighbors=100
WeightMultiplier=3.5

[License] < "/qms/cfg/original.qms.cfg" [License]
LicenseServerHost={{ .Values.qms.licenseServerHostname }}
